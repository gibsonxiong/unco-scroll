!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.UScroll=e():t.UScroll=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function a(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},i=[],o=0;o<t.length;o++){var r=t[o],l=e.base?r[0]+e.base:r[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var h=a(u),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==h?(s[h].references++,s[h].updater(f)):s.push({identifier:u,updater:g(f,e),references:1}),i.push(u)}return i}function c(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,h=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=h(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function d(t,e,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var p=null,v=0;function g(t,e){var n,i,o;if(e.singleton){var r=v++;n=p||(p=c(e)),i=f.bind(null,n,r,!1),o=f.bind(null,n,r,!0)}else n=c(e),i=d.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var o=a(n[i]);s[o].references--}for(var r=l(t,e),c=0;c<n.length;c++){var u=a(n[c]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=r}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=(s=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(l," */")),r=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([o]).join("\n")}var s,a,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e,n){var i=n(0),o=n(3);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};i(o,r);t.exports=o.locals||{}},function(t,e,n){(e=n(1)(!1)).push([t.i,".scrollview{position:relative;box-sizing:content-box;overflow:hidden;-ms-overflow-style:none;scrollbar-width:none}.scrollview::-webkit-scrollbar{width:0px}.scrollview-content{position:relative;z-index:1;transform-origin:0 0;white-space:initial}.scrollview-mask{display:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:10}.scrollview-mask.scrollview-mask-active{display:block !important}\n",""]),t.exports=e},function(t,e,n){var i=n(0),o=n(5);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};i(o,r);t.exports=o.locals||{}},function(t,e,n){(e=n(1)(!1)).push([t.i,".scrollview-scrollbar{z-index:100;position:absolute}.scrollview-scrollbar.scrollbar-x{height:3px;left:2px;right:2px;bottom:3px}.scrollview-scrollbar.scrollbar-y{width:3px;top:2px;bottom:2px;right:3px}.scrollview-scrollbar .scrollbar-indicator{opacity:1;position:absolute;background:rgba(0,0,0,0.45);border-radius:30px}.scrollview-scrollbar .scrollbar-indicator.hidden{opacity:0;transition:opacity 0.3s ease-out}.scrollview-scrollbar.scrollbar-x .scrollbar-indicator{height:100%}.scrollview-scrollbar.scrollbar-y .scrollbar-indicator{width:100%}\n",""]),t.exports=e},function(t,e,n){var i=n(0),o=n(7);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};i(o,r);t.exports=o.locals||{}},function(t,e,n){(e=n(1)(!1)).push([t.i,".scrollview-paging-inactive{display:none !important;position:absolute !important}\n",""]),t.exports=e},function(t,e,n){var i=n(0),o=n(9);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};i(o,r);t.exports=o.locals||{}},function(t,e,n){(e=n(1)(!1)).push([t.i,".scroll-sticky-fixed{z-index:20;position:absolute;top:0;left:0;width:100%}\n",""]),t.exports=e},function(t,e,n){var i=n(0),o=n(11);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};i(o,r);t.exports=o.locals||{}},function(t,e,n){(e=n(1)(!1)).push([t.i,".pull-loader{position:absolute;z-index:0}.pull-loader.top,.pull-loader.bottom{width:100%;left:0}.pull-loader.top .pull-loader-text,.pull-loader.bottom .pull-loader-text{margin-left:10px}.pull-loader.left,.pull-loader.right{height:100%;top:0;writing-mode:vertical-rl}.pull-loader.left .pull-loader-text,.pull-loader.right .pull-loader-text{letter-spacing:3px;margin-top:10px}.pull-loader .pull-loader-wrap{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.pull-loader .pull-loader-icon{display:inline-block;width:22px;height:22px;vertical-align:middle}.pull-loader .pull-loader-icon .circle{stroke:#777}.pull-loader .pull-loader-text{font-size:14px;color:#777}\n",""]),t.exports=e},function(t,e,n){"use strict";n.r(e),n.d(e,"animation",(function(){return R})),n.d(e,"touch",(function(){return Ut}));n(2);var i,o={trident:(i=navigator.userAgent).indexOf("Trident")>-1,presto:i.indexOf("Presto")>-1,webKit:i.indexOf("AppleWebKit")>-1,gecko:i.indexOf("Gecko")>-1&&-1==i.indexOf("KHTML"),mobile:!!i.match(/AppleWebKit.*Mobile.*/),ios:!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:i.indexOf("Android")>-1||i.indexOf("Adr")>-1,iPhone:i.indexOf("iPhone")>-1,iPad:i.indexOf("iPad")>-1,webApp:-1==i.indexOf("Safari"),weixin:i.indexOf("MicroMessenger")>-1,qq:" qq"==i.match(/\sQQ/i)},r=((navigator.browserLanguage||navigator.language).toLowerCase(),{axis:"xy",scrollNeedOverflow:!0,startX:null,startY:null,lockAxisAngle:45,freeMode:!0,resistanceFactor:.55,resistancePercentForMaxSizeLimit:.6,resistanceMomentumFactor:.65,momentum:!0,momentumMinDistance:50,momentumFactor:.21,momentumEasing:"cubic-bezier(0.18, 0.72, 0.46, 1)",momentumDuration:2500,decreaseEasing:"cubic-bezier(0.15, 0.1, 0.4, 0.94)",decreaseDuration:100,rebounceEasing:"cubic-bezier(0.28, 0.8, 0.5, 0.94)",rebounceDuration:500,scrollEasing:"quad-ease-out",scrollDuration:300,alignX:"start",alignY:"start",accelerateByFastPan:!0,minScrollX:null,maxScrollX:null,minScrollY:null,maxScrollY:null,bounceX:!0,bounceY:!0,boundingReleaseX:!1,boundingReleaseY:!1,use3d:!1,zoom:!1,zoomStart:1,zoomMin:1,zoomMax:3,allowTouch:!0});o.android&&(r.use3d=!0,r.momentumFactor=.32);for(var a,l=r,c=Math.max,u=window.setTimeout,h=parseFloat(1e3/60,2),f=["ms","moz","webkit","o"],d=window.requestAnimationFrame,p=window.cancelAnimationFrame,v=0;v<f.length&&!d&&!p;++v)d=window[f[v]+"RequestAnimationFrame"],p=window[f[v]+"CancelAnimationFrame"]||window[f[v]+"CancelRequestAnimationFrame"];d||(a=0,d=function(t){var e=+new Date,n=c(0,h-(e-a)),i=u((function(){t(e+n)}),n);return a=e+n,i}),p||(p=function(t){clearTimeout(t)});var g={fps:60,mspf:h,request:d.bind(window),cancel:p.bind(window)};function m(t,e,n){return(m=y()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&b(o,n.prototype),o}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var x=Math.pow,S=Math.abs;function k(t){return t.replace(/\s+/g,"")}var P=function(){function t(e,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.px3=3*e,this.px2=3*(i-e)-this.px3,this.px1=1-this.px3-this.px2,this.py3=3*n,this.py2=3*(o-n)-this.py3,this.py1=1-this.py3-this.py2,this.epsilon=1e-5}var e,n,i;return e=t,(n=[{key:"getX",value:function(t){return((this.px1*t+this.px2)*t+this.px3)*t}},{key:"getY",value:function(t){return((this.py1*t+this.py2)*t+this.py3)*t}},{key:"solve",value:function(t){if(0===t||1===t)return this.getY(t);for(var e=t,n=0;n<6;n++){var i=this.getX(e)-t;if(S(i)<this.epsilon)return this.getY(e);var o=(3*this.px1*e+2*this.px2)*e+this.px3;if(S(o)<1e-4)break;e-=i/o}return this.getY(e)}}])&&w(e.prototype,n),i&&w(e,i),t}(),O={linear:function(t,e,n,i){return n*t/i+e},"quad-ease-in":function(t,e,n,i){return n*(t/=i)*t+e},"quad-ease-out":function(t,e,n,i){return-n*(t/=i)*(t-2)+e},"quad-ease-in-out":function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},"cubic-ease-in":function(t,e,n,i){return n*(t/=i)*t*t+e},"cubic-ease-out":function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},"cubic-ease-in-out":function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},"quart-ease-in":function(t,e,n,i){return n*(t/=i)*x(t,3)+e},"quart-ease-out":function(t,e,n,i){return-n*((t=t/i-1)*x(t,3)-1)+e},"quart-ease-in-out":function(t,e,n,i){return(t/=i/2)<1?n/2*x(t,4)+e:-n/2*((t-=2)*x(t,3)-2)+e},"quint-ease-in":function(t,e,n,i){return n*(t/=i)*x(t,4)+e},"quint-ease-out":function(t,e,n,i){return n*((t=t/i-1)*x(t,4)+1)+e},"quint-ease-in-out":function(t,e,n,i){return(t/=i/2)<1?n/2*x(t,5)+e:n/2*((t-=2)*x(t,4)+2)+e},"sine-ease-in":function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},"sine-ease-out":function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},"sine-ease-in-out":function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},"expo-ease-in":function(t,e,n,i){return 0==t?e:n*x(2,10*(t/i-1))+e},"expo-ease-out":function(t,e,n,i){return t==i?e+n:n*(1-x(2,-12*t/i))+e},"expo-ease-in-out":function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=i/2)<1?n/2*x(2,10*(t-1))+e:n/2*(2-x(2,-10*--t))+e},"circ-ease-in":function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},"circ-ease-out":function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},"circ-ease-in-out":function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},"elastic-ease-in":function(t,e,n,i,o,r){if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),!o||o<Math.abs(n)){o=n}else Math.PI,Math.asin(n/o);return-o*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/r)+e},"elastic-ease-out":function(t,e,n,i,o,r){if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),!o||o<Math.abs(n)){o=n}else Math.PI,Math.asin(n/o);return o*Math.pow(2,-10*t)*Math.sin((t*i-s)*(2*Math.PI)/r)+n+e},"elastic-ease-in-out":function(t,e,n,i,o,r){if(0==t)return e;if(2==(t/=i/2))return e+n;if(r||(r=i*(.3*1.5)),!o||o<Math.abs(n)){o=n}else Math.PI,Math.asin(n/o);return t<1?o*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/r)*-.5+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/r)*.5+n+e},"back-ease-in":function(t,e,n,i,o){return null==o&&(o=1.70158),n*(t/=i)*t*((o+1)*t-o)+e},"back-ease-out":function(t,e,n,i,o){return null==o&&(o=1.70158),n*((t=t/i-1)*t*((o+1)*t+o)+1)+e},"back-ease-in-out":function(t,e,n,i,o){return null==o&&(o=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(o*=1.525))*t-o))+e:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e},"bounce-ease-in":function(t,e,n,i){return n-O["bounce-ease-out"](i-t,0,n,i)+e},"bounce-ease-out":function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},"bounce-ease-in-out":function(t,e,n,i){return t<i/2?.5*O["bounce-ease-in"](2*t,0,n,i)+e:.5*O["bounce-ease-out"](2*t-i,0,n,i)+.5*n+e}},_={get:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear";if("function"==typeof n)return n;if(t=/^cubic-bezier\(([\d.]+),([\d.]+),([\d.]+),([\d.]+)\)$/g.exec(k(n))){n=k(n);var i=O[n];if(!i){var o=[t[1],t[2],t[3],t[4]];e=m(P,o),i=function(t,n,i,o){var r=t/o;return i*(r=e.solve(r))+n},this.register(n,i)}return i}return O[n]},register:function(t,e){O[t]=e}};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var T={},M=T.toString;function Y(t){var e=!!t&&"length"in t&&t.length,n=function(t){return null==t?t+"":"object"===E(t)||"function"==typeof t?T[M.call(t)]||"object":E(t)}(t);return"function"!==n&&!function(t){return null!=t&&t===t.window}(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function X(t){var e;if("object"==E(t))if(null===t)e=null;else if(t instanceof Array){e=[];for(var n=0,i=t.length;n<i;n++)e.push(X(t[n]))}else for(var o in e={},t)e[o]=X(t[o]);else e=t;return e}var j={inArray:function(t,e,n){return null!=e&&-1!==Array.prototype.indexOf.call(e,t,n)},isArray:function(t){return t&&t.constructor===Array},isArrayLike:Y,each:function(t,e){var n,i=0;if(Y(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},extend:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var i=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&void 0!==i[o]&&(e[o]=X(i[o]))}return e},throttling:function(t,e,n){n=null!=n?n:200;var i=null;return function(){i&&clearTimeout(i),i=setTimeout((function(){t.call(e)}),n)}},copyProperties:function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n],r=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,r)}}};function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function A(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this.options=j.extend({},this.constructor._defaults,e),this._playing=!1,this.timer=null,this.lastestTime=0,this.frames={},this.callbacks=[]}var e,n,i;return e=t,(n=[{key:"_tick",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.isPlaying()){var o=n-this.lastestTime;this.lastestTime=n,this.options.onBeforeTick.call(this),Object.keys(this.frames).forEach((function(n){var i=t.frames[n];!e&&i.isCompleted()||i._change(e,o)})),i&&i.call(this),this.options.onAfterTick.call(this);var r=Object.keys(this.frames).every((function(e){return t.frames[e].isCompleted()}));r?this.stop(!0):this.timer=g.request((function(e){t._tick(!1,e,i)}))}}},{key:"_exceCallback",value:function(t){var e=this;this.callbacks.forEach((function(n){n.call(e,t)})),this.callbacks=[]}},{key:"add",value:function(t,e){this.frames[t]=e}},{key:"remove",value:function(t){delete this.frames[t]}},{key:"clear",value:function(){this.frames={}}},{key:"play",value:function(t){if((t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({handler:null,callback:null},t)).callback&&this.callbacks.push(t.callback),!this.isPlaying()){this._playing=!0,this.options.onPlay.call(this);var e=performance.now();return this.lastestTime=e,this._tick(!0,e,t.handler),this}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isPlaying())return this._playing=!1,this._exceCallback(t),this.options.onStop.call(this,{completed:t}),g.cancel(this.timer),this}},{key:"isPlaying",value:function(){return this._playing}}])&&A(e.prototype,n),i&&A(e,i),t}();function B(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}C(I,"_defaults",{onBeforeTick:function(){},onAfterTick:function(){},onPlay:function(){},onStop:function(){}});var V,L,z,F=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e=j.extend({},this.constructor._defaults,e),this._forward=!0,this._init()}var e,n,i;return e=t,(n=[{key:"_init",value:function(){var t=this.options,e=t.index,n=t.duration;this.total=Math.round(n/g.mspf),this.current=e,this.prev=e}},{key:"isForward",value:function(){return this._forward}},{key:"goto",value:function(t){this.setProgress(t),this._enterFrame()}},{key:"setProgress",value:function(t){this.prev=this.current,this.current=this.total*t}},{key:"getProgress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;return 0===this.total?1:t<=0?0:t>=this.total?1:t/this.total}},{key:"_change",value:function(t,e){t||this.step(e),this._enterFrame()}},{key:"step",value:function(t){this.prev=this.current;var e=Math.max(Math.round(t/g.mspf),1);this._forward?this.current+=e:this.current-=e,this.current=Math.max(0,Math.min(this.total,this.current))}},{key:"_enterFrame",value:function(){var t=this.options,e=t.begin,n=t.end,i=this.current,o=this.prev,r=this.total,s=_.get(this.options.easing),a=s(this.getProgress(),0,1,1),l=e+(n-e)*a;l=parseFloat(l.toFixed(2));var c=e+(n-e)*s(0===this.total?0:this.getProgress(o),0,1,1);c=parseFloat(c.toFixed(2)),this.options.handler.call(this,l,c,a),(this._forward&&i<=0||!this._forward&&i>=r)&&this.options.onFirstFrame.call(this),(this._forward&&i>=r||!this._forward&&i<=0)&&this.options.onLastFrame.call(this)}},{key:"isCompleted",value:function(){return this._forward?this.current>=this.total:this.current<=0}}])&&B(e.prototype,n),i&&B(e,i),t}();z={begin:0,end:1,duration:300,easing:"linear",index:0,handler:function(){},onFirstFrame:function(){},onLastFrame:function(){}},(L="_defaults")in(V=F)?Object.defineProperty(V,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):V[L]=z;var R={aF:g,easing:_,Animater:I,Frame:F};function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"isParentScrolling",value:function(t){for(var e=t.wrapper.parentElement;e;){if(e.scrollView&&e.scrollView.isScrolling)return!0;e=e.parentElement}return!1}}],(n=null)&&H(e.prototype,n),i&&H(e,i),t}();function q(t){return function(t){if(Array.isArray(t))return U(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}N(W,"instances",{}),N(W,"scrollingAxisMap",{});var K,$,J={t:"Top",l:"Left",r:"Right",b:"Bottom"},Q=(K={},$={set:function(t){return t+"px"},get:function(t){return parseFloat(t)||0}},["width","height","left","top","bottom","right","paddingLeft","paddingTop","paddingBottom","paddingRight","marginLeft","marginTop","marginBottom","marginRight"].forEach((function(t){K[t]=$})),{get:function(t,e){var n=K[t];return n?n.get(e):e},set:function(t,e){var n=K[t];return n?n.set(e):e}}),Z={getStyle:function(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return Q.get(e,n)},setStyle:function(t,e,n){if("object"!==G(e))t.style[e]=Q.set(e,n);else{var i=e;Object.keys(i).forEach((function(e){Z.setStyle(t,e,i[e])}))}},addClass:function(t,e){t.classList.add(e)},removeClass:function(t,e){t.classList.remove(e)},setAttr:function(t,e,n){return t.setAttribute(e,n)},getAttr:function(t,e){return t.getAttribute(e)},getScrollLeft:function(){return document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft},getScrollTop:function(){return document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop},getScrollWidth:function(){return document.documentElement.scrollWidth||document.body.scrollWidth},getScrollHeight:function(){return document.documentElement.scrollHeight||document.body.scrollHeight},getClientWidth:function(){return window.innerWidth},getClientHeight:function(){return window.innerHeight},getOffset:function(t){var e=0,n=0,i=t.offsetWidth,o=t.offsetHeight,r=t.offsetParent;for(e+=t.offsetLeft,n+=t.offsetTop;r;)-1===navigator.userAgent.indexOf("MSIE 8.0")&&(e+=r.clientLeft,n+=r.clientTop),e+=r.offsetLeft,n+=r.offsetTop,r=r.offsetParent;return{left:e,top:n,width:i,height:o}},getBoxRect:function(t,e){var n=t.offsetWidth,i=t.offsetHeight,o=t.offsetTop,r=t.offsetLeft,s=null,a=null,l=null,c=null;switch(e=e||"borderBox"){case"marginBox":s=n+Z.getMargin(t,"lr"),a=i+Z.getMargin(t,"tb"),l=o-Z.getMargin(t,"t"),c=r-Z.getMargin(t,"l");break;case"borderBox":default:s=n,a=i,l=o,c=r;break;case"paddingBox":s=n-Z.getBorderWidth(t,"lr"),a=i-Z.getBorderWidth(t,"tb"),l=o+Z.getBorderWidth(t,"t"),c=r+Z.getBorderWidth(t,"l");break;case"contentBox":s=n-Z.getBorderWidth(t,"lr")-Z.getPadding(t,"lr"),a=i-Z.getBorderWidth(t,"tb")-Z.getPadding(t,"tb"),l=o+Z.getBorderWidth(t,"t")+Z.getPadding(t,"t"),c=r+Z.getBorderWidth(t,"l")+Z.getPadding(t,"l")}return{width:s,height:a,top:l,left:c}},getBorderWidth:function(t,e){for(var n=0,i=0,o=(e=e.split("")).length;i<o;i++){var r=e[i];n+=Z.getStyle(t,"border"+J[r]+"Width")||0}return n},getPadding:function(t,e){for(var n=0,i=0,o=(e=e.split("")).length;i<o;i++){var r=e[i];n+=Z.getStyle(t,"padding"+J[r])||0}return n},getMargin:function(t,e){for(var n=0,i=0,o=(e=e.split("")).length;i<o;i++){var r=e[i];n+=Z.getStyle(t,"margin"+J[r])||0}return n},create:function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild},html:function(t,e){"string"==typeof e?t.innerHTML=e:(t.innerHTML="",t.appendChild(e))},prepend:function(t,e){"string"==typeof e&&(e=Z.create(e)),t.insertBefore(e,t.firstElementChild)},append:function(t,e){"string"==typeof e&&(e=Z.create(e)),t.appendChild(e)},onImgLoaded:function(t,e){var n="img"===t.tagName?[t]:q(t.querySelectorAll("img")),i=n.filter((function(t){return!t.complete})).length;function o(){--i||e()}i>0&&[].forEach.call(n,(function(t){t.addEventListener("load",o,!1),t.addEventListener("error",o,!1)}))},unifyHeight:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.querySelectorAll(e);Array.prototype.forEach.call(i,(function(t){t.style.height="auto"}));var o,r=(o=0,Array.prototype.forEach.call(i,(function(t){var e=n?Math.max:Math.min;o=e(t.offsetHeight,o)})),o);Array.prototype.forEach.call(i,(function(t){t.style.height=r+"px"}))},checkInBoundY:function(t,e){var n=Z.getScrollTop(),i=Z.getClientHeight();return n<=t&&n+i>=t||n<=e&&n+i>=e},checkInElementY:function(t){var e=Z.getOffset(t),n=e.top,i=n,o=n+e.height;return Z.checkInBoundY(i,o)},detectInBoundY:function(t,e,n){var i=function i(){Z.checkInBoundY(t,e)&&(n&&n(),window.removeEventListener("scroll",i))};window.addEventListener("scroll",i),i()},detectInElementY:function(t,e){var n=Z.getOffset(t),i=n.top,o=i,r=i+n.height;Z.detectInBoundY(o,r,e)},genStyleSheet:function(t,e){Z.removeStyleSheet(e);var n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.innerHTML=t,n.id=e,document.getElementsByTagName("head")[0].appendChild(n)},removeStyleSheet:function(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}},tt=Z;function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){it(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ot,rt=R.Frame,st=R.aF,at={_dragStart:function(t){if(this.zooming)t.nativeEvent.preventDefault();else{var e=this.options,n=this.prevLockedAxis||t.movingAxis,i=!t.nativeEvent.cancelable,o=t.nativeEvent.srcElement;if(this.canMoveX=!0,this.canMoveY=!0,this.defaultPrevented=!1,t.nativeEvent.defaultPrevented&&(this.canMoveX=!1,this.canMoveY=!1),"y"===e.axis&&(this.canMoveX=!1),"x"===e.axis&&(this.canMoveY=!1),!1===e.freeMode&&e.axis.indexOf("x")>-1&&"y"===n&&(this.canMoveX=!1),!1===e.freeMode&&e.axis.indexOf("x")>-1&&"y"===n&&(this.canMoveX=!1),!1===e.freeMode&&e.axis.indexOf("y")>-1&&"x"===n&&(this.canMoveY=!1),this.isParentScrolling&&!this.isScrollForceStoped&&(this.canMoveX=!1,this.canMoveY=!1),this.options.scrollNeedOverflow&&(this.maxScrollX-this.minScrollX<=0&&(this.canMoveX=!1),this.maxScrollY-this.minScrollY<=0&&(this.canMoveY=!1)),e.boundingReleaseX){var r=this.scrollX-t.deltaX;e.axis.indexOf("x")>=0&&"x"===n&&(this.decimal(this.scrollX)!==this.decimal(this.minScrollX)&&this.decimal(this.scrollX)!==this.decimal(this.maxScrollX)||!this.isOverBounding("x",r)||(this.canMoveX=!1,this.canMoveY=!1))}if(e.boundingReleaseY){var s=this.scrollY-t.deltaY;e.axis.indexOf("y")>=0&&"y"===n&&(this.decimal(this.scrollY)!==this.decimal(this.minScrollY)&&this.decimal(this.scrollY)!==this.decimal(this.maxScrollY)||!this.isOverBounding("y",s)||(this.canMoveX=!1,this.canMoveY=!1))}"TEXTAREA"===o.tagName||"INPUT"===o.tagName?(o!==document.activeElement&&document.activeElement.blur(),o.scrollHeight>o.clientHeight&&(0===o.scrollTop&&t.deltaY>0||o.scrollTop===o.scrollHeight-o.clientHeight&&t.deltaY<0?console.log("---"):(this.canMoveX=!1,this.canMoveY=!1))):document.activeElement.blur(),this.trigger("onDragStart"),this.trigger("onScrollCheck"),!this.canMoveX&&!this.canMoveY||i?this.defaultPrevented=!0:(t.nativeEvent.preventDefault(),this.isScrolling=!0,this.lockedAxis=n)}},_drag:function(t){if(this.zooming)t.nativeEvent.preventDefault();else{this.options;var e=!t.nativeEvent.cancelable;if((this.canMoveX||this.canMoveY)&&!e){var n=-t.deltaX,i=-t.deltaY;this.canMoveX||(n=0),this.canMoveY||(i=0),this.scrollX+this.handleDelta("x",n,!0),this.scrollY+this.handleDelta("y",i,!0),this._doDrag("x",n),this._doDrag("y",i),this.fixCursorPosition(),t.nativeEvent.preventDefault()}}},_doDrag:function(t,e,n){var i=this.options.delegateDrag;if(0!==e){if(i){var o=i.call(this,t,e);if(o&&o.scrollView!==n){var r=0;o.scrollView.options.onDelegateDrag&&(r=o.scrollView.options.onDelegateDrag.call(o.scrollView,o.axis,o.delta))&&(e-=r,o.scrollView._doDrag(o.axis,r,this))}}this.setScrollPos(t,this.getScrollPos(t)+this.handleDelta(t,e,!0)),this.update()}},_dragEnd:function(t){var e=this;if(!this.zooming){var n=this.options,i=n.momentum,o=n.momentumEasing,r=n.momentumDuration,s=n.momentumFactor,a=n.momentumMinDistance,l=n.resistanceFactor,c=n.decreaseDuration,u=n.decreaseEasing,h=n.rebounceDuration,f=n.rebounceEasing,d=n.accelerateByFastPan,p=n.resistancePercentForMaxSizeLimit,v=function(n){var i="x"===n?-t.speedX:-t.speedY,o="x"===n?t.fastTimesX:t.fastTimesY,l=e.getMomentum(i,r,s);return d&&o>=3&&(l*=Math.min(o/2,20)),Math.abs(l)<a&&(l=0),e.getScrollPos(n)+l},g={};["x","y"].forEach((function(n){var s="x"===n?e.canMoveX:e.canMoveY,d="x"===n?-t.speedX:-t.speedY;if(e.isOverBounding(n)){var m=e.isOverUpperBounding(n);if(0!==d&&s)if(m&&d>0||!m&&d<0){var y=v(n),b=e.getScrollPos(n),w=e.getBoundingPos(n,m),x=b-y;Math.abs(x)>a?(y=w-(b-y),g[n]={newScrollPos:y,duration:r,easing:o}):g[n]={newScrollPos:e.getBoundingPos(n,m),duration:.8*h,easing:f}}else{var S=function(n,i){var o="x"===n?-t.speedX:-t.speedY,r="x"===n?e.wrapperWidth:e.wrapperHeight,s=e.getMomentum(o,c,l*e.options.resistanceMomentumFactor),a=e.getScrollPos(n)-e.getBoundingPos(n,i),u=(r*p-Math.abs(a))/(r*p);return s*=u=Math.max(u,.05),Math.abs(s)<10&&(s=0),e.getScrollPos(n)+s}(n,m);S===e.getScrollPos(n)?g[n]={newScrollPos:e.getBoundingPos(n,m),duration:.8*h,easing:f}:g[n]={newScrollPos:S,duration:.8*c,easing:u}}else g[n]={newScrollPos:e.getBoundingPos(n,m),duration:.8*h,easing:f}}else g[n]={newScrollPos:s&&i?v(n):e.getScrollPos(n),duration:r,easing:o}}));var m=nt(nt({},g),{},{defaultPrevented:this.defaultPrevented,callback:void 0});this.trigger("onDragEnd",m),["x","y"].forEach((function(t){var n=m[t];n.newScrollPos!==e.getScrollPos(t)&&e.setupScroll(t,n.newScrollPos,{duration:n.duration,easing:n.easing})})),this.animater.play({callback:m.callback})}},_doAnimation:function(t,e,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.duration,s=o.easing,a=o.currentFrame,l=o.checkBounding,c=void 0===l||l,u=this.options,h=u.bounceX,f=u.bounceY,d=u.delegateAnimation,p="x"===t?h:f,v=j.isArray(p)?p[0]:p,g=j.isArray(p)?p[1]:p;this.setScrollPos(t,this.getScrollPos(t)+e);var m=new rt({begin:0,end:n,handler:function(e,o){var a=i.getScrollPos(t),l=i.decimal(e-o),u=!1;if(0!==l&&d){var h=d.call(i,t,l);if(h){var f=0;h.scrollView.options.onDelegateAnimation&&(f=h.scrollView.options.onDelegateAnimation.call(h.scrollView,h.axis,h.delta))&&(l-=f,console.log(i.wrapper.className,"delegate",h.scrollView.wrapper.className,l),h.scrollView.animationDelegating=!0,h.scrollView._doAnimation(h.axis,f,n,{duration:r,easing:s,currentFrame:m.current+1,checkBounding:!0}),h.scrollView.animater.play(),u=!0)}}var p=i.decimal(i.getScrollPos(t)+l);if(c&&(!i.isOverUpperBounding(t)&&i.isOverUpperBounding(t,p)||!i.isOverLowerBounding(t)&&i.isOverLowerBounding(t,p))){var y=i.isOverUpperBounding(t,p),b=i.isOverLowerBounding(t,p),w=i.getBoundingPos(t,y);if(y&&v||b&&g){p=(p-w)*i.options.resistanceFactor+w,i.setScrollPos(t,p);var x=(p-a)/st.mspf,S=i.getMomentum(x,i.options.decreaseDuration,i.options.resistanceFactor*i.options.resistanceMomentumFactor);0===S?(i.setScrollPos(t,w),i.animater.remove(t)):i.setupDecrease(t,p+S,w,y)}else i.setScrollPos(t,w),i.animater.remove(t)}else i.setScrollPos(t,p);u&&i.animater.remove(t)},onLastFrame:function(){c&&i.setupBounce(t)},duration:r,easing:s,index:a});this.animater.add(t,m)},setupScroll:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.duration,o=n.easing,r=n.currentFrame,s=n.checkBounding,a=void 0===s||s;if(!this.animationDelegating){var l=this.decimal(e-this.getScrollPos(t));this._doAnimation(t,0,l,{duration:i,easing:o,currentFrame:r,checkBounding:a})}},setupDecrease:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=o.duration,s=void 0===r?this.options.decreaseDuration:r,a=o.easing,l=void 0===a?this.options.decreaseEasing:a,c=this["x"===t?"wrapperWidth":"wrapperHeight"]*this.options.resistancePercentForMaxSizeLimit,u=i?-c+n:c+n;e=i?Math.max(e,u):Math.min(e,u),console.log("Decrease",this.wrapper.className),this.setupScroll(t,e,{duration:s,easing:l})},setupBounce:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.duration,o=void 0===i?this.options.rebounceDuration:i,r=n.easing,s=void 0===r?this.options.rebounceEasing:r;if(this.isOverUpperBounding(t))e=this.getBoundingPos(t,!0);else{if(!this.isOverLowerBounding(t))return;e=this.getBoundingPos(t,!1)}console.log("Bounce"),this.setupScroll(t,e,{duration:o,easing:s})}},lt=R.Frame,ct={_zoomStart:function(t){t.nativeEvent.preventDefault(),this.zooming=!0;var e=this.wrapper.getBoundingClientRect();this.startScale=this.scale,this.startScrollX=this.scrollX,this.startScrollY=this.scrollY,this.zoomOriginX=t.centerX+this.scrollX-e.left,this.zoomOriginY=t.centerY+this.scrollY-e.top},_zoom:function(t){t.nativeEvent.preventDefault();var e=this.options,n=e.zoomMin,i=e.zoomMax,o=this.startScale*t.scale;o<n?o=.5*n*Math.pow(2,o/n):o>i&&(o=2*i*Math.pow(.5,i/o)),this.scale=o,this.scrollX=(this.scale/this.startScale-1)*this.zoomOriginX+this.startScrollX,this.scrollY=(this.scale/this.startScale-1)*this.zoomOriginY+this.startScrollY,this._refresh(!1,!1),this.update()},_zoomEnd:function(t){var e=this;t.nativeEvent.preventDefault();var n=this.limitScale(this.scale),i=(n/this.startScale-1)*this.zoomOriginX+this.startScrollX,o=(n/this.startScale-1)*this.zoomOriginY+this.startScrollY;this._refresh(!1,!0,n),i<this.minScrollX?i=this.minScrollX:i>this.maxScrollX&&(i=this.maxScrollX),o<this.minScrollY?o=this.minScrollY:o>this.maxScrollY&&(o=this.maxScrollY),this.setupScroll("x",i,{duration:this.options.rebounceDuration,easing:this.options.rebounceEasing,checkBounding:!1}),this.setupScroll("y",o,{duration:this.options.rebounceDuration,easing:this.options.rebounceEasing,checkBounding:!1}),this.setupScaleAnimation(n,void 0,void 0,!1,this.options.rebounceDuration,this.options.rebounceEasing),this.animater.play({callback:function(t){t||(e.scale=n,e.scrollX=i,e.scrollY=o,e._update(),e._refresh(!1,!0)),e.zooming=!1}})},limitScale:function(t){var e=this.options,n=e.zoomMin,i=e.zoomMax;return t<n?t=n:t>i&&(t=i),t},setupScaleAnimation:function(t,e,n,i){var o=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.options.scrollDuration,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.options.scrollEasing,a=this.scale,l=this.wrapper.getBoundingClientRect();this.startScale=this.scale,this.startScrollX=this.scrollX,this.startScrollY=this.scrollY,this.zoomOriginX=e+this.scrollX-l.left,this.zoomOriginY=n+this.scrollY-l.left,this.animater.add("scale",new lt({begin:a,end:t,handler:function(t){o.scale=t,i&&(o.scrollX=(o.scale/o.startScale-1)*o.zoomOriginX+o.startScrollX,o.scrollY=(o.scale/o.startScale-1)*o.zoomOriginY+o.startScrollY),o._refresh(!1,!0)},onLastFrame:function(){i&&o.bound()},duration:r,easing:s}))},zoomTo:function(t,e,n,i){t=this.limitScale(t),this.setupScaleAnimation(t,e,n,!0),this.animater.play({callback:i})},zoomBy:function(t,e,n,i){var o=this.scale*t;this.zoomTo(o,e,n,i)}},ut={isOverUpperBounding:function(t,e,n){var i="x"===t?this.minScrollX:this.minScrollY;return void 0===e&&(e=this.getScrollPos(t)),n?this.decimal(e)<=this.decimal(i):this.decimal(e)<this.decimal(i)},isOverLowerBounding:function(t,e,n){var i="x"===t?this.maxScrollX:this.maxScrollY;return void 0===e&&(e=this.getScrollPos(t)),n?this.decimal(e)>=this.decimal(i):this.decimal(e)>this.decimal(i)},isOverBounding:function(t,e,n){return this.isOverUpperBounding(t,e,n)||this.isOverLowerBounding(t,e,n)}},ht=(ot=0,function(){return ot++}),ft={};var dt={get:function(t,e){var n=this.getAll(t);return n?n[e]:null},set:function(t,e,n){var i,o;this._hasId(t)||this._setId(t),i=this._getId(t),null==(o=ft[i])&&(o=ft[i]={}),o[e]=n},getAll:function(t){var e=this._getId(t);return null==ft[e]?null:ft[e]},getAndIfNullSetDefault:function(t,e,n){return null==this.get(t,e)?(this.set(t,e,n),n):this.get(t,e)},_getId:function(t){return t.__uuid__},_setId:function(t){!function(t,e,n){Object.defineProperty(t,e,{value:n})}(t,"__uuid__",ht())},_hasId:function(t){return null!=this._getId(t)},getIdOrSet:function(t){return this._hasId(t)||this._setId(t),this._getId(t)}};window.cache=dt,window.cacheMap=ft;var pt=dt;function vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gt(t,e,n){return e&&vt(t.prototype,e),n&&vt(t,n),t}function mt(t){return!!t&&t.constructor==Object}function yt(t){return!!t&&t.constructor==Array}function bt(t,e){j.each(t,(function(t,n){return e(n,t)}))}function wt(t,e){if(0===t.length)return!0;for(var n=0,i=t.length;n<i;n++)if(j.inArray(t[n],e))return!0;return!1}var xt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.on(e,n)}return gt(t,null,[{key:"_innerOn",value:function(e,n,i,o,r){if(null!=n)if(mt(n))for(var s in r=o,o=i,n)t._innerOn(e,s,n[s],o,r);else if(-1===n.indexOf(" ")){if(yt(n))bt(n,(function(n){mt(i)?t._innerOn(e,n,i[n],o,r):t._innerOn(e,n,i,o,r)}));else if(yt(i))for(var a=0,l=i.length;a<l;a++)t._innerOn(e,n,i[a],o,r);else if(n&&i){var c=pt.getAndIfNullSetDefault(e,"events",{}),u=[],h=n.split(".");if(h.length>1){n=h[0];for(var f=1;f<h.length;f++)u.push(h[f])}var d=c[n]=c[n]||[];if(o){var p=i;(i=function(){t.off(e,n,i),p.apply(e,arguments)})._original=p}var v={handler:i,namespace:u};r?d.unshift(v):d.push(v)}}else bt(n.split(" "),(function(n){t._innerOn(e,n,i,o,r)}))}},{key:"_innerOff",value:function(e,n,i){var o=pt.get(e,"events");if(null!=o)if(void 0!==n)if(0!==n.indexOf("."))if(-1!==n.indexOf(".")||void 0!==i){var r=n.split(".");n=r[0];var s=r.splice(1),a=o[n]=o[n]||[];if(0!==a.length)for(var l=0,c=a.length;l<c;l++)if(wt(s,a[l].namespace))if(i){if(a[l].handler===i){a.splice(l,1);break}}else a.splice(l,1),l--,c--}else o[n]=[];else bt(o,(function(i,o){t.off(e,o+n,i)}));else pt.set(e,"events",null)}},{key:"on",value:function(e,n,i,o){return o=j.extend({prepend:!1,once:!1},o),t._innerOn(e,n,i,o.prepend,o.once),this}},{key:"off",value:function(e,n,i){return t._innerOff(e,n,i),this}},{key:"trigger",value:function(e,n,i){var o=pt.get(e,"events");if(0===n.indexOf("."))return bt(o,(function(o,r){t.trigger(e,r+n,i)})),!1;if(i=i||{},null==o)return!1;var r=n.split(".");n=r[0];var s=r.splice(1),a=o[n]=o[n]||[];if(0===a.length)return!1;for(var l=0,c=(a=a.slice(0)).length;l<c;l++){if(wt(s,a[l].namespace))a[l].handler.call(e,i)}return!1}},{key:"getEvents",value:function(t){return pt.get(t,"events")}},{key:"getEventsByType",value:function(t,e){var n=this.getEvents(t);return n[e]=n[e]||[]}}]),gt(t,[{key:"on",value:function(e,n,i){return t.on(this,e,n,i),this}},{key:"off",value:function(e,n){return t.off(this,e,n),this}},{key:"trigger",value:function(e,n){return t.trigger(this,e,n)}}]),t}();function St(t){return function(t){if(Array.isArray(t))return kt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Pt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ot=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events=[]}var e,n,i;return e=t,(n=[{key:"on",value:function(t,e,n,i){t&&(xt.on(t,e,n),!0!==i&&this._addListener(t,e),this.events.push({elem:t,eventType:e,listener:n}))}},{key:"off",value:function(t,e,n,i){if(t){n=n.delegateListener||n,xt.off(t,e,n),!0!==i&&this._removeListener(t,e);var o=this.findIndex(t,e,n);o>-1&&this.events.splice(o,1)}}},{key:"delegate",value:function(t,e,n,i){var o=pt.getIdOrSet(t);this.on(i,e+"_DElEGATE_"+o,n,!0),this._addListener(i,e)}},{key:"proxy",value:function(t,e,n,i){var o=this;t.querySelectorAll(i).forEach((function(i){o.delegate(i,e,n,t)}))}},{key:"findIndex",value:function(t,e,n){return this.events.findIndex((function(i){return i.elem===t&&i.eventType===e&&i.listener===n}))}},{key:"_addListener",value:function(t,e){var n=e+"_BUS",i=xt.getEventsByType(t,n)[0];i||(i=function(n){(function(t){for(var e=t.target,n=t.currentTarget,i=[],o=e;o&&o!==n;)i.push(o),o=o.parentElement;return i.push(n),i})(n).some((function(i){var o=pt._getId(i);return!!o&&(!!n.cancelBubble||void xt.trigger(t,e+"_DElEGATE_"+o,n))})),n.cancelBubble||xt.trigger(t,e,n)},xt.on(t,n,i),t.addEventListener(e,i))}},{key:"_removeListener",value:function(t,e){var n=e+"_BUS",i=xt.getEventsByType(t,n)[0];0===xt.getEventsByType(t,e).length&&i&&(xt.off(t,n,i.handler),t.removeEventListener(e,i.handler))}},{key:"destroy",value:function(){var t=this;St(this.events).forEach((function(e){var n=e.elem,i=e.eventType,o=e.listener;t.off(n,i,o)})),delete this.events}}])&&Pt(e.prototype,n),i&&Pt(e,i),t}(),_t=function(){var t=0;return function(){return t++}}();function Et(){return+new Date}function Tt(t){return t.touches.length}function Mt(t,e){var n,i;return n=t.x-e.x,i=t.y-e.y,Math.sqrt(n*n+i*i)}function Yt(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var jt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.touch=e,this.options=n,this.tapCount=0}var e,n,i;return e=t,(n=[{key:"getPoint",value:function(t,e,n){return{x:t[e],y:t[n]}}},{key:"handleStart",value:function(t){1===this.touch.fingers?this.maxFingers=1:this.maxFingers=Math.max(this.maxFingers||0,this.touch.fingers);var e=Et();this.startPoint=this.getPoint(t.touches[0],"pageX","pageY"),this.startTime=e,this.lastestPoint=this.getPoint(t.touches[0],"pageX","pageY"),this.lastestTime=e}},{key:"handleMove",value:function(t){this.lastestPoint=this.getPoint(t.touches[0],"pageX","pageY"),this.lastestTime=Et()}},{key:"handleEnd",value:function(t){this.lastestPoint=this.getPoint(t.changedTouches[0],"pageX","pageY"),this.lastestTime=Et(),Mt(this.lastestPoint,this.startPoint)<=10&&this.lastestTime-this.startTime<=300&&1===this.maxFingers&&(this.tapCount>0&&this.lastestTime-this.prevLastTime<=300&&Mt(this.lastestPoint,this.prevLastPoint)<=20?this.tapCount++:this.tapCount=1,this.touch.trigger("onTap",{nativeEvent:t,x:this.startPoint.x,y:this.startPoint.y}),this.tapCount%2==0&&this.touch.trigger("onDoubleTap",{nativeEvent:t,x:this.prevStartPoint.x,y:this.prevStartPoint.y})),this.prevStartPoint=this.startPoint,this.prevLastPoint=this.lastestPoint,this.prevLastTime=this.lastestTime}}])&&Xt(e.prototype,n),i&&Xt(e,i),t}();function Dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var At=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.touch=e,this.options=n}var e,n,i;return e=t,(n=[{key:"handleStart",value:function(){this.inited||(this.inited=!0,this.first=!0,this.speedX=0,this.speedY=0)}},{key:"handleMove",value:function(t){if(this.inited&&(this.options.multi||!(this.touch.fingers>1))){var e=this.options.lockAxisAngle,n=0,i=0,r=0,s=0;this.touch.ongoingTouches.forEach((function(t){t.deltaX>0&&(n=Math.max(n,t.deltaX)),t.deltaX<0&&(i=Math.min(i,t.deltaX)),t.deltaY>0&&(r=Math.max(r,t.deltaY)),t.deltaY<0&&(s=Math.min(s,t.deltaY))}));var a=n+i,l=r+s,c="",u=function(t,e){var n=Math.atan(-1*(e.y-t.y)/(e.x-t.x))*(180/Math.PI);return 180-(n=n<0?n+180:n)}({x:a,y:l},{x:0,y:0});c=0<=u&&u<=e||180-e<=u&&u<=180?"x":"y";var h=0===this.touch.deltaTime?0:a/this.touch.deltaTime,f=0===this.touch.deltaTime?0:l/this.touch.deltaTime;h>0&&this.speedX<0||h<0&&this.speedX>0||Math.abs(h)<.2*Math.abs(this.speedX)&&!o.android?this.speedX=h:this.speedX=(h+this.speedX)/2,f>0&&this.speedY<0||f<0&&this.speedY>0||Math.abs(f)<.2*Math.abs(this.speedY)&&!o.android?this.speedY=f:this.speedY=(f+this.speedY)/2;var d={nativeEvent:t,movingAxis:c,deltaX:a,deltaY:l};this.first?(this.touch.trigger("onPanStart",d),this.first=!1):this.touch.trigger("onPan",d)}}},{key:"handleEnd",value:function(t){if(this.inited&&!(this.touch.fingers>0)){var e=1-Math.min((this.touch.deltaTime-5)/100,1);this.speedX*=e,this.speedY*=e;var n={nativeEvent:t,fastTimesX:1,fastTimesY:1,speedX:this.speedX,speedY:this.speedY};this.touch.trigger("onPanEnd",n),this.inited=!1}}}])&&Dt(e.prototype,n),i&&Dt(e,i),t}();function Ct(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var It=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.touch=e,this.options=n}var e,n,i;return e=t,(n=[{key:"handleStart",value:function(){if(!(this.inited||this.touch.fingers<2)){var t=this.touch.ongoingTouches[0],e=this.touch.ongoingTouches[1],n=Yt(t,e),i=Mt(t,e);this.inited=!0,this.startDistance=i,this.prevCenter=n,this.first=!0}}},{key:"handleMove",value:function(t){if(this.inited&&!(this.touch.fingers<2)){var e=this.touch.ongoingTouches[0],n=this.touch.ongoingTouches[1],i=Yt(e,n),o=Mt(e,n),r=o/this.startDistance,s=i.x-this.prevCenter.x,a=i.y-this.prevCenter.y,l={nativeEvent:t,centerX:i.x,centerY:i.y,deltaX:s,deltaY:a,distance:o,scale:r};this.first?(this.touch.trigger("onPinchStart",l),this.first=!1):this.touch.trigger("onPinch",l),this.prevCenter=i}}},{key:"handleEnd",value:function(t){if(this.inited&&!(this.touch.fingers>2)){var e={nativeEvent:t};this.touch.trigger("onPinchEnd",e),this.inited=!1}}}])&&Ct(e.prototype,n),i&&Ct(e,i),t}();function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ht(t);if(e){var o=Ht(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ft(this,n)}}function Ft(t,e){return!e||"object"!==Bt(e)&&"function"!=typeof e?Rt(t):e}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(r,t);var e,n,i,o=zt(r);function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=(n=o.call(this)).options=j.extend({},n.constructor._defaults,e),n.elem=t,n.id=_t(),n.elem.touch=Rt(n),n.gestrue=null,n._disabled=!1,n.domEvent=new Ot,n.ongoingTouches=[],n.on(n.constructor._events,e),n.bindEvent(),n.tap=new jt(Rt(n),e),n.pan=new At(Rt(n),e),n.pinch=new It(Rt(n),e),n}return e=r,(n=[{key:"bindEvent",value:function(){var t=this,e=this.options,n=e.preventDefault,i=e.stopPropagation;this.elem.addEventListener("touchstart",(function(e){t._disabled||(i&&e.stopPropagation(),n&&e.preventDefault(),t.handleTouchStart(e))}),{passive:!0,capture:!1}),this.elem.addEventListener("touchmove",(function(e){t._disabled||(i&&e.stopPropagation(),n&&e.preventDefault(),t.handleTouchMove(e))})),this.elem.addEventListener("touchend",(function(e){t._disabled||(i&&e.stopPropagation(),n&&e.preventDefault(),t.handleTouchEnd(e))}),{passive:!0,capture:!1}),this.elem.addEventListener("touchcancel",(function(e){t._disabled||(i&&e.stopPropagation(),n&&e.preventDefault(),t.handleTouchEnd(e))}),{passive:!0,capture:!1})}},{key:"handleTouchStart",value:function(t){for(var e=t.changedTouches,n=0;n<e.length;n++)this.ongoingTouches.push(this.copyTouch(e[n]));this.fingers=Tt(t),this.ongoingTime=Et(),this.inited||(this.trigger("onInputStart"),this.inited=!0),this.tap.handleStart(t),this.pan.handleStart(t),this.pinch.handleStart(t)}},{key:"handleTouchMove",value:function(t){var e=this;if(this.inited){var n=t.changedTouches,i=Et();this.ongoingTouches.forEach((function(t){var i=[].find.call(n,(function(e){return e.identifier==t.identifier}));i?(i=e.copyTouch(i),t.deltaX=i?i.x-t.x:0,t.deltaY=i?i.y-t.y:0,t.x=i.x,t.y=i.y):(t.deltaX=0,t.deltaY=0)})),this.fingers=Tt(t),this.deltaTime=Math.max(i-this.ongoingTime,5),this.ongoingTime=Et(),this.tap.handleMove(t),this.pan.handleMove(t),this.pinch.handleMove(t)}}},{key:"handleTouchEnd",value:function(t){if(this.inited){for(var e=t.changedTouches,n=Et(),i=0;i<e.length;i++){var o=this.ongoingTouchIndexById(e[i].identifier);this.ongoingTouches.splice(o,1)}this.fingers=Tt(t),this.deltaTime=Math.max(n-this.ongoingTime,5),this.ongoingTime=Et(),this.tap.handleEnd(t),this.pan.handleEnd(t),this.pinch.handleEnd(t),0===this.fingers&&(this.ongoingTouches=[],this.trigger("onInputEnd"),this.inited=!1)}}},{key:"copyTouch",value:function(t){return{identifier:t.identifier,x:t.clientX,y:t.clientY}}},{key:"ongoingTouchIndexById",value:function(t){for(var e=0;e<this.ongoingTouches.length;e++)if(this.ongoingTouches[e].identifier==t)return e;return-1}},{key:"isDisabled",value:function(){return this._disabled}},{key:"disable",value:function(){this._disabled=!0}},{key:"enable",value:function(){this._disabled=!1}},{key:"destroy",value:function(){this.domEvent.destroy()}}])&&Vt(e.prototype,n),i&&Vt(e,i),r}(xt);Nt(Wt,"_defaults",{freeMode:!0,stopPropagation:!1,preventDefault:!1}),Nt(Wt,"_events",["onInputStart","onTap","onPanStart","onPan","onPanEnd","onSwipe","onTap","onDoubleTap","onPinchStart","onPinch","onPinchEnd"]);var qt={};var Ut={on:function(t,e){var n=new Wt(t),i=n.id;return qt[i]=n,i},off:function(t){var e=qt[t];e&&e.destroy()},Touch:Wt};function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Jt(t,e,n){return e&&$t(t.prototype,e),n&&$t(t,n),t}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ne(t);if(e){var o=ne(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return te(this,n)}}function te(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?ee(t):e}function ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var re=R.Animater,se=R.aF,ae=function(){var t=0;return function(){return t++}}();var le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(n,t);var e=Zt(n);function n(t,i){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),i=(o=e.call(this)).options=j.extend({},o.constructor._defaults,i),o.id=ae(),t.scrollView=ee(o),W[o.id]=ee(o),o.wrapper=t,o.content=t.firstElementChild,tt.addClass(o.wrapper,"scrollview"),tt.addClass(o.content,"scrollview-content"),o.scale=i.zoom&&i.zoomStart||1,o._refresh(!0,!0),o.scrollX=null!=o.options.startX?o.options.startX:o.minScrollX,o.scrollY=null!=o.options.startY?o.options.startY:o.minScrollY,o.isScrolling=!1,o.lockedAxis="",o.prevLockedAxis="",o.isScrollForceStoped=!1,o.isParentScrolling=!1,o.animationDelegating=!1,o.domEvent=new Ot,o.on(o.constructor._events,i),o._bindEvent(),o._initTouch(),o._initAnimater(),o._initMask(),o._applyPlugins();var r={scrollX:o.scrollX,scrollY:o.scrollY,scale:o.scale};return o.trigger("onInit",r),o.backupX=r.scrollX,o.backupY=r.scrollY,o.scale=r.scale,o.moveTo(r.scrollX,r.scrollY,!0),tt.onImgLoaded(o.content,(function(){o._refresh(!0,!1)})),o}return Jt(n,null,[{key:"use",value:function(t){var e=t.pluginName;e&&(n.pluginMap[e]||(n.plugins.push(t),n.pluginMap[e]=t))}},{key:"get",value:function(t){return"string"==typeof t&&(t=document.querySelector(t)),t.scrollView}}]),Jt(n,[{key:"_applyPlugins",value:function(){var t=this;n.plugins.forEach((function(e){var n=e.pluginName;t.options[n]&&(t[n]=new e(t,t.options[n]))}))}},{key:"_bindEvent",value:function(){var t=this;this.domEvent.on(window,"resize",j.throttling((function(){console.log("resize"),t.refresh(),t.bound()}))),this.domEvent.on(document,"focusin",(function(e){clearTimeout(t.resetTopTimer)})),this.domEvent.on(document,"focusout",(function(e){t.resetTopTimer=setTimeout((function(){document.documentElement.scrollTop=0}),100)}))}},{key:"_initTouch",value:function(){var t=this,e=this.options;this.touch=new Wt(this.wrapper,{lockAxisAngle:e.lockAxisAngle,onInputStart:function(e){t._inputStart(e)},onPanStart:function(e){t._dragStart(e)},onPan:function(e){t._drag(e)},onPanEnd:function(e){t._dragEnd(e)}}),e.zoom&&this.touch.on({onPinchStart:function(e){t._zoomStart(e)},onPinch:function(e){t._zoom(e)},onPinchEnd:function(e){t._zoomEnd(e)}}),e.allowTouch||this.touch.disable()}},{key:"_initAnimater",value:function(){var t=this;this.animater=new re({onAfterTick:function(){t.isScrolling=!0,t.trigger("onAnimation"),t.update(!0),t.fixCursorPosition()},onPlay:function(){t.trigger("onAnimationStart")},onStop:function(e){var n=e.completed;t.trigger("onAnimationEnd",{completed:n}),t.trigger("onScrollEnd",{completed:n}),t.isScrolling=!1,t.animationDelegating=!1,t.lockedAxis=""}})}},{key:"_initMask",value:function(){this.mask=document.createElement("div"),tt.addClass(this.mask,"scrollview-mask"),this.wrapper.appendChild(this.mask)}},{key:"_refresh",value:function(t,e,n){var i=this,o=this.options,r=o.alignX,s=o.alignY;t&&(this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.originContentWidth=this.content.scrollWidth,this.originContentHeight=this.content.scrollHeight),null!=n?(this.contentWidth=this.decimal(this.originContentWidth*n),this.contentHeight=this.decimal(this.originContentHeight*n)):(this.contentWidth=this.decimal(this.originContentWidth*this.scale),this.contentHeight=this.decimal(this.originContentHeight*this.scale)),this.contentWidth<=this.wrapperWidth?(this.minScrollX="start"===r?0:"end"===r?-(this.wrapperWidth-this.contentWidth):-(this.wrapperWidth-this.contentWidth)/2,this.maxScrollX=this.minScrollX):(this.minScrollX=0,this.maxScrollX=this.contentWidth-this.wrapperWidth),this.contentHeight<=this.wrapperHeight?(this.minScrollY="start"===s?0:"end"===s?-(this.wrapperHeight-this.contentHeight):-(this.wrapperHeight-this.contentHeight)/2,this.maxScrollY=this.minScrollY):(this.minScrollY=0,this.maxScrollY=this.contentHeight-this.wrapperHeight),["minScrollX","maxScrollX","minScrollY","maxScrollY"].forEach((function(t){var e=i.options[t];null!=e&&(i[t]="function"==typeof e?e.call(i,i[t]):e)})),e||this.trigger("onRefresh")}},{key:"_update",value:function(){var t={scrollX:this.scrollX,scrollY:this.scrollY,scale:this.scale};this.trigger("onWillScroll",t),this.scrollX=t.scrollX,this.scrollY=t.scrollY,this.scale=t.scale,this.deltaX=this.scrollX-this.backupX,this.deltaY=this.scrollY-this.backupY,this.backupX=this.scrollX,this.backupY=this.scrollY,this.options.use3d?this.content.style.transform="matrix3d(".concat(this.scale,", 0, 0, 0, 0, ").concat(this.scale,", 0, 0, 0, 0, 1, 0,").concat(-this.scrollX,", ").concat(-this.scrollY,", 0, 1)"):this.content.style.transform="matrix(".concat(this.scale,",0,0,").concat(this.scale,",").concat(-this.scrollX,",").concat(-this.scrollY,")"),0===this.deltaX&&0===this.deltaY||this.trigger("onScroll",{scrollX:this.scrollX,scrollY:this.scrollY})}},{key:"update",value:function(t){this.updateTimeId&&(se.cancel(this.updateTimeId),this.updateTimeId=null),t?this._update():this.updateTimeId=se.request(this._update.bind(this))}},{key:"_inputStart",value:function(){var t=this;this.isScrollForceStoped=this.isScrolling&&(Math.abs(this.deltaX)>.5||Math.abs(this.deltaY)>.5),this.isParentScrolling=W.isParentScrolling(this),this.prevLockedAxis=this.lockedAxis,clearTimeout(this.maskTimeId),tt.removeClass(this.mask,"scrollview-mask-active"),this.isScrollForceStoped&&(tt.addClass(this.mask,"scrollview-mask-active"),this.maskTimeId=setTimeout((function(){tt.removeClass(t.mask,"scrollview-mask-active")}),300)),this.stop()}},{key:"handleDelta",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.options.axis!==t&&"xy"!==this.options.axis)return e;var i="x"===t?this.scrollX:this.scrollY,o=i+e;if(n&&this.isOverBounding(t,o)){var r=this.options,s=r.bounceX,a=r.bounceY,l=r.resistanceFactor,c=r.resistancePercentForMaxSizeLimit,u="x"===t?this.minScrollX:this.minScrollY,h="x"===t?this.maxScrollX:this.maxScrollY,f="x"===t?this.wrapperWidth:this.wrapperHeight,d=this.isOverUpperBounding(t,o),p=this.isOverLowerBounding(t,o),v="x"===t?s:a,g=j.isArray(v)?v[0]:v,m=j.isArray(v)?v[1]:v;if(g&&d||m&&p){var y=d?u-o:o-h,b=(f*c-y)/(f*c);e=e*l*(b=Math.max(b,.05))}else e=d?u-i:h-i}return e}},{key:"refresh",value:function(){this._refresh(!0,!1)}},{key:"html",value:function(t){tt.html(this.content,t),this.refresh()}},{key:"moveTo",value:function(t,e,n){this.scrollX=null==t||isNaN(t)?this.scrollX:t,this.scrollY=null==e||isNaN(e)?this.scrollY:e,this.update(!1,n)}},{key:"scrollToElement",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",o=arguments.length>2?arguments[2]:void 0,r=tt.getBoxRect(t);"x"===i&&(e=r.left),"y"===i&&(n=r.top),this.scrollTo(e,n,o)}},{key:"scrollBy",value:function(t,e,n){t=null==t?this.scrollX:this.scrollX+t,e=null==e?this.scrollY:this.scrollY+e,this.scrollTo(t,e,n)}},{key:"scrollTo",value:function(t,e,n){t=null==t?this.scrollX:t,e=null==e?this.scrollY:e,n=Kt({duration:this.options.scrollDuration,easing:this.options.scrollEasing},n),this.stop(),n.duration>0?(t!==this.scrollX?this.setupScroll("x",t,n):this.setupBounce("x"),e!==this.scrollY?this.setupScroll("y",e,n):this.setupBounce("y"),this.animater.play({callback:n.callback})):this.moveTo(t,e)}},{key:"fixCursorPosition",value:function(){var t=document.activeElement;t&&("TEXTAREA"!==t.tagName&&"INPUT"!==t.tagName||(""===t.style.textShadow?t.style.textShadow="rgba(0,0,0,0) 0 0 0":t.style.textShadow=""))}},{key:"bound",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setupBounce("x",{duration:t.duration}),this.setupBounce("y",{duration:t.duration}),this.animater.play({callback:t.callback})}},{key:"getMomentum",value:function(t,e,n){return t*e*n}},{key:"stop",value:function(){this.animater.stop(),this.animater.clear()}},{key:"querySelector",value:function(t){return this.content.querySelector(t)}},{key:"querySelectorAll",value:function(t){return this.content.querySelectorAll(t)}},{key:"getElementRect",value:function(t){var e=this.content.getBoundingClientRect(),n=t.getBoundingClientRect();return{left:n.left-e.left,top:n.top-e.top,width:n.width,height:n.height}}},{key:"setOptions",value:function(t){var e=function t(e,n){var i={};return Object.keys(e).forEach((function(o){e[o]!==n[o]&&("object"===oe(e[o])&&null!==e[o]?i[o]=t(e[o],n[o]):i[o]=e[o])})),i}(t,this.options);console.log(e),this.options=Kt(Kt({},this.options),e),this.trigger("onSetOptions",e);var n=!1;["minScrollX","maxScrollX","minScrollY","maxScrollY"].forEach((function(e){t.hasOwnProperty(e)&&(n=!0)})),"allowTouch"in t&&(t.allowTouch?this.touch.enable():this.touch.disable()),n&&this._refresh(!1,!1)}},{key:"decimal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null==t?t:parseFloat(t.toFixed(e))}},{key:"getScrollPos",value:function(t){return"x"===t?this.scrollX:this.scrollY}},{key:"setScrollPos",value:function(t,e){this["x"===t?"scrollX":"scrollY"]=this.decimal(e)}},{key:"getBoundingPos",value:function(t,e){var n=this["x"===t?"minScrollX":"minScrollY"],i=this["x"===t?"maxScrollX":"maxScrollY"];return e?n:i}},{key:"destroy",value:function(){this.domEvent.destroy()}}]),n}(xt);ie(le,"_defaults",l),ie(le,"_events",["onInit","onDragStart","onDrag","onDragEnd","onWillScroll","onScroll","onScrollEnd","onScrollCheck","onAnimationStart","onAnimation","onAnimationEnd","onRefresh"]),ie(le,"plugins",[]),ie(le,"pluginMap",{}),j.copyProperties(le.prototype,at),j.copyProperties(le.prototype,ct),j.copyProperties(le.prototype,ut);var ce=le;n(4);function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function he(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fe(t,e,n){return e&&he(t.prototype,e),n&&he(t,n),t}function de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pe=function(){function t(e,n,i){ue(this,t),i=this.options=j.extend({},this.constructor._defaults,i),this.axis=n,this.scrollView=e,this.keys={x:["Width","X"],y:["Height","Y"]}[this.axis],this.hideTimer=null,this._init(),this._update()}return fe(t,[{key:"_init",value:function(){var t=this.axis,e=this.scrollView;this.track=document.createElement("div"),tt.addClass(this.track,"scrollview-scrollbar"),tt.addClass(this.track,"scrollbar-".concat(t)),e.wrapper.appendChild(this.track),this.indicator=document.createElement("div"),tt.addClass(this.indicator,"scrollbar-indicator"),tt.addClass(this.indicator,"hidden"),this.track.appendChild(this.indicator)}},{key:"getScrollInfo",value:function(){var t=this.keys,e=this.scrollView,n=e["wrapper".concat(t[0])],i=e["content".concat(t[0])];return{wrapperSize:n,contentSize:i,ratio:n/i,minScrollPos:0,maxScrollPos:i-n}}},{key:"getScrollPos",value:function(){return this.scrollView["scroll".concat(this.keys[1])]}},{key:"_update",value:function(){var t=this.getScrollInfo(),e=this.keys;this.trackSize=this.track["offset".concat(e[0])],this.indicatorSize=this.trackSize*t.ratio,this.minScrollPos=0,this.maxScrollPos=this.trackSize-this.indicatorSize,this.viewRatio=this.trackSize/t.contentSize,this._translate(!1)}},{key:"_translate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.getScrollInfo(),n=40,i=10,o=this.getScrollPos(),r=this.trackSize,s=this.indicatorSize,a=this.viewRatio,l=this.minScrollPos,c=this.maxScrollPos,u=s,h=o*a,f=c;if(u<n&&(h*=(c=this.trackSize-n)/f,u=n),h<l)u-=0-o,u=Math.max(u,i),h=l;else if(h>c){var d=u;u-=o-e.maxScrollPos,h=c+d-(u=Math.max(u,i))}u>=r&&(u=0),"x"==this.axis?(this.indicator.style.width=u+"px",this.indicator.style.transform="translate3d("+h+"px,0,0)"):(this.indicator.style.height=u+"px",this.indicator.style.transform="translate3d(0, "+h+"px, 0)"),t&&this.show()}},{key:"show",value:function(){clearTimeout(this.hideTimer),tt.removeClass(this.indicator,"hidden")}},{key:"hide",value:function(){var t=this;this.hideTimer=setTimeout((function(){tt.addClass(t.indicator,"hidden")}),this.options.hideDelay)}}]),t}();de(pe,"_defaults",{hideDelay:1e3});var ve=function(){function t(e,n){ue(this,t),n=this.options=j.extend({},this.constructor._defaults,n),this.scrollView=e,"inherit"===n.axis&&(n.axis=e.options.axis),"y"!==n.axis&&(this.x=new pe(e,"x")),"x"!==n.axis&&(this.y=new pe(e,"y")),this._bindEvent(),this._update()}return fe(t,[{key:"_bindEvent",value:function(){var t=this;this.scrollView.on("onScroll",(function(e){t._translate()})),this.scrollView.on("onRefresh",(function(e){t._update()})),this.scrollView.on("onScrollEnd",(function(e){e.completed&&t.hide()}))}},{key:"_update",value:function(){this.x&&this.x._update(),this.y&&this.y._update()}},{key:"_translate",value:function(){this.x&&this.x._translate(),this.y&&this.y._translate()}},{key:"hide",value:function(){this.x&&this.x.hide(),this.y&&this.y.hide()}}]),t}();function ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ge(Object(n),!0).forEach((function(e){we(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ye(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function be(t,e,n){return e&&ye(t.prototype,e),n&&ye(t,n),t}function we(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}de(ve,"pluginName","scrollbar"),de(ve,"_defaults",{axis:"inherit"});var xe=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this.options=j.extend({},this.constructor._defaults,n),this.scrollView=e,e.options.axis=n.axis,e.options.freeMode=!1,e.options.rebounceDuration=n.duration,e.options.rebounceEasing=n.easing,this.cloneCount=0,this.snapData=[],this.inited=!1,this._bindEvent(),this._initLoop(),this._collect(),this.progress=0,this.oldIndex=-1,this.activeIndex=0;var i=this.options.index+this.cloneCount;this.goto(i,0),this._autoplay(),this.inited=!0}return be(t,[{key:"realIndex",get:function(){return this.getRealIndex(this.activeIndex)}}]),be(t,[{key:"_bindEvent",value:function(){var e=this;this.scrollView.on("onRefresh",(function(t){e._handleRefresh(event)})),this.scrollView.on("onDragStart",(function(t){e._handleDragStart(t)})),this.scrollView.on("onDragEnd",(function(t){e._handleDragEnd(t)})),this.scrollView.on("onSetOptions",(function(n){if(n[t.pluginName]){var i=n[t.pluginName];e.options=me(me({},e.options),i),"autoplay"in i&&(i.autoplay?e._autoplay():e._stopAutoplay())}})),this.scrollView.on("onWillScroll",(function(t){if(e.options.loop){var n=e.snapData.length;if(t.scrollX<=e.snapData[0].pos+e.snapData[0].size){var i=e.getRealItem(e.getRealIndex(0));t.scrollX=t.scrollX-(e.snapData[0].pos+e.snapData[0].size)+(i.pos+i.size)}if(t.scrollX+e.scrollView.wrapperWidth>=e.snapData[n-1].pos){var o=e.getRealItem(e.getRealIndex(n-1));t.scrollX=t.scrollX-e.snapData[n-1].pos+o.pos}}})),this.scrollView.on("onScroll",(function(t){var n="x"===e.options.axis?t.scrollX:t.scrollY;e._progress(n)})),this.scrollView.on("onScrollEnd",(function(t){t.completed&&(e._autoplay(),e.options.onChange(e.activeIndex))}))}},{key:"_collect",value:function(){var t=this,e=this.options,n=e.selector,i=e.axis,o=e.align,r=e.firstAlign,s=e.lastAlign,a=e.loop;this.snapData=[];var l=this.scrollView.querySelectorAll(n),c="x"==i?"Width":"Height",u="x"==i?"Left":"Top";l.forEach((function(e,n){var i;i=0===n&&r&&!a?r:n===l.length-1&&s&&!a?s:o;var h=e["offset".concat(c)],f=function(e,n){var i=e["offset".concat(c)];return"start"===n?e["offset".concat(u)]:"end"===n?e["offset".concat(u)]-t.scrollView["wrapper".concat(c)]+i:e["offset".concat(u)]-(t.scrollView["wrapper".concat(c)]-i)/2}(e,i);n>=t.cloneCount&&n<=l.length-1-t.cloneCount&&tt.setAttr(e,"data-real-index",n-t.cloneCount),t.snapData.push({elem:e,pos:f,size:h})}));var h=this.snapData.length,f={};h>0&&(f["x"===i?"minScrollX":"minScrollY"]=this.snapData[0].pos,f["x"===i?"maxScrollX":"maxScrollY"]=this.snapData[h-1].pos,this.scrollView.eventFlag="snap/init",this.scrollView.setOptions(f),this.scrollView.eventFlag=void 0)}},{key:"_progress",value:function(t){!function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(this.options);var e,n=this.activeIndex,i=this.snapData[n],o=i.pos,r=this.snapData[n-1],s=r?r.pos:o-i.size,a=this.snapData[n+1],l=a?a.pos:o+i.size;for(t===o?e=0:t<o?e=-(o-t)/(o-s):t>o&&(e=(t-o)/(l-o)),e=parseFloat(e.toFixed(2));e>=1&&n<this.snapData.length-1;)n+=1,e-=1;for(;e<=-1&&n>0;)n-=1,e+=1;this.activeIndex=n,this.progress=e,this.options.onProgress.call(this,n,e)}},{key:"getElemsByRealIndex",value:function(t){return this.scrollView.querySelectorAll('[data-real-index="'.concat(t,'"]'))}},{key:"_activeElem",value:function(t){var e=this.getRealIndex(t),n=this.getRealIndex(this.oldIndex);if(this.snapData.length>0&&t!==this.oldIndex){var i=this.getElemsByRealIndex(n),o=this.getElemsByRealIndex(e);i.forEach((function(t){tt.removeClass(t,"active")})),o.forEach((function(t){tt.addClass(t,"active")})),this.oldIndex=t}}},{key:"_handleRefresh",value:function(t){["snap/init","pullloader/ready","pullloader/complete"].indexOf(this.scrollView.eventFlag)>-1||(this._collect(),this.activeIndex=this.cureIndex(this.activeIndex),this.goto(this.activeIndex,0))}},{key:"_handleDragStart",value:function(t){this._stopAutoplay()}},{key:"_handleDragEnd",value:function(t){var e=this.options,n=e.axis,i=e.duration,o=e.easing,r=e.step,s=e.onlyEdgeBounce,a=this.activeIndex,l=t[n],c=l.newScrollPos,u=this._findSnapItem(c,!0,r);if(u){var h=!1;s?(this.scrollView.isOverUpperBounding(n,c)&&0===a||this.scrollView.isOverLowerBounding(n,c)&&a===this.snapData.length-1)&&(h=!0):r?(this.scrollView.isOverUpperBounding(n,c)&&a<=1||this.scrollView.isOverLowerBounding(n,c)&&a>=this.snapData.length-2)&&(h=!0):this.scrollView.isOverBounding(n,c)&&(h=!0),h?l.newScrollPos=c:(l.newScrollPos=u.pos,l.duration=i,l.easing=o),this._activeElem(u.index),this.options.onWillChange(u.index)}}},{key:"_findSnapItem",value:function(t,e,n){var i=this,o=this.options.disabledClassName,r=null,s=1/0,a=this.activeIndex;return this.snapData.forEach((function(l,c){if(!(e&&l.elem.classList.contains(o)||i.progress<0&&c>i.activeIndex||i.progress>0&&c<i.activeIndex||n&&!(i.activeIndex-1<=c&&i.activeIndex+1>=c))){var u=t-l.pos;Math.abs(u)<Math.abs(s)&&(s=u,a=c,r=l)}})),me(me({},r),{},{index:a,offset:s})}},{key:"_initLoop",value:function(){if(this.options.loop){var t=this.scrollView.content,e=this.scrollView.querySelectorAll(this.options.selector),n=e.length;this.cloneCount=3;for(var i=0;i<this.cloneCount;i++){var o=n-(this.cloneCount-i),r=e[o].cloneNode(!0);tt.addClass(r,"virtual"),tt.setAttr(r,"data-real-index",o),t.insertBefore(r,e[0]),o=i;var s=e[i].cloneNode(!0);tt.addClass(s,"virtual"),tt.setAttr(s,"data-real-index",o),t.appendChild(s)}this.scrollView.refresh()}}},{key:"goto",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.duration,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.easing;if(t=this.cureIndex(t),this.activeIndex!==t||!this.inited){var i,o,r=this.snapData[t];console.log(this.scrollView.isScrolling),this.scrollView.isScrolling||r&&("x"===this.options.axis&&(i=r.pos),"y"===this.options.axis&&(o=r.pos),this._activeElem(t),this.scrollView.scrollTo(i,o,{duration:e,easing:n}))}}},{key:"cureIndex",value:function(t){return Math.max(0,Math.min(this.snapData.length-1,t))}},{key:"prev",value:function(){this.goto(this.activeIndex-1)}},{key:"next",value:function(){this.goto(this.activeIndex+1)}},{key:"getRealCount",value:function(){return this.snapData.length-2*this.cloneCount}},{key:"getRealIndex",value:function(t){t-=this.cloneCount;var e=this.getRealCount();return t<0?t+=e:t>e-1&&(t-=e),t}},{key:"getRealItem",value:function(t){return this.snapData[t+this.cloneCount]}},{key:"_autoplay",value:function(){var t=this;this.options.autoplay&&(console.log("[Snap]","autoplay"),this._stopAutoplay(),this.autoplayTimer=setTimeout((function(){t.activeIndex===t.snapData.length-1?t.goto(0):t.next()}),this.options.autoplayInterval))}},{key:"_stopAutoplay",value:function(){clearTimeout(this.autoplayTimer)}}]),t}();we(xe,"pluginName","snap"),we(xe,"_defaults",{index:0,duration:300,easing:"cubic-bezier(0.25, 0, 0.5, 1)",selector:".scroll-snap",disabledClassName:"scroll-snap-disabled",axis:"x",loop:!1,align:"start",firstAlign:null,lastAlign:null,step:!0,onlyEdgeBounce:!0,autoplay:!1,autoplayInterval:3e3,onProgress:function(){},onWillChange:function(){},onChange:function(){}});n(6);function Se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pe=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this.options=j.extend({},this.constructor._defaults,n),this.scrollView=e,this.data=[],this._bindEvent(),this._collect(),this.dect(0)}var e,n,i;return e=t,(n=[{key:"_bindEvent",value:function(){var t=this;this.scrollView.on("onRefresh",(function(t){console.log("refresh")}));var e,n,i,o,r=(e=function(){console.log("dect"),"x"===t.options.axis?t.dect(t.scrollView.scrollX):"y"===t.options.axis&&t.dect(t.scrollView.scrollY)},n=this.options.dectInterval,i=Date.now(),o=null,function(){var t=this,r=arguments,s=Date.now();clearTimeout(o),s-i>=n?(e.apply(t,r),i=s):o=setTimeout((function(){e.apply(t,r),i=s}),n-(s-i))});this.scrollView.on("onScroll",r)}},{key:"_collect",value:function(){var t=this;this.scrollView.querySelectorAll(".scrollview-paging-inactive").forEach((function(t){t.classList.remove("scrollview-paging-inactive")})),this.scrollView.querySelectorAll(".spaceholder").forEach((function(t){t.parentElement.removeChild(t)}));var e=this.options,n=e.selector,i=e.axis;this.data=[];var o=this.scrollView.querySelectorAll(n),r="x"==i?"Width":"Height",s="x"==i?"Left":"Top";o.forEach((function(e){var n=e["offset".concat(s)],i=e["offset".concat(r)];t.data.push({elem:e,minPos:n,maxPos:n+i,size:i})})),this.data.forEach((function(t,e){var n=document.createElement("div");n.className="spaceholder spaceholder-".concat(e),n.style.height=t.size+"px",n.style.display="none",t.elem.parentElement.insertBefore(n,t.elem),t.spaceholder=n}))}},{key:"dect",value:function(t){var e=this.options.offset;this.data.forEach((function(n){n.minPos<=t+e&&n.maxPos>=t-e?n.elem.classList.contains("scrollview-paging-inactive")&&(n.elem.classList.remove("scrollview-paging-inactive"),n.spaceholder.style.display="none"):n.elem.classList.contains("scrollview-paging-inactive")||(n.elem.classList.add("scrollview-paging-inactive"),n.spaceholder.style.display="")}))}}])&&Se(e.prototype,n),i&&Se(e,i),t}();function Oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(n),!0).forEach((function(e){Te(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ee(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ke(Pe,"pluginName","paging"),ke(Pe,"_defaults",{axis:"y",selector:".scroll-paging",dectInterval:1500,offset:2e3});var Me=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this.options=j.extend({},this.constructor._defaults,n),this.scrollView=e,this.data=[],this._bindEvent(),this._init(),this.checkHit()}var e,n,i;return e=t,(n=[{key:"_bindEvent",value:function(){var t=this;this.scrollView.on("onScroll",(function(e){t.checkHit()}))}},{key:"_init",value:function(){var t=this,e=this.options.selector;this.data=[],this.scrollView.querySelectorAll(e).forEach((function(e){var n=t.scrollView.getElementRect(e);t.data.push(_e(_e({},n),{},{elem:e}))})),console.log(this.data)}},{key:"checkHit",value:function(){var t=this,e=this.scrollView.scrollX,n=e+this.scrollView.wrapperWidth,i=this.scrollView.scrollY,o=i+this.scrollView.wrapperHeight;this.data.forEach((function(r){if(r.left+r.width<=n&&r.left+r.width>e&&r.top+r.height<=o&&r.top+r.height>i||r.left>=e&&r.left<n&&r.top>=i&&r.top<o){if("loading"===r.elem.getAttribute("lazyload-status"))return;r.elem.setAttribute("lazyload-status","loading"),r.elem.src=r.elem.getAttribute("data-src"),r.elem.addEventListener("load",(function(){r.elem.setAttribute("lazyload-status","loaded");var e=t.data.indexOf(r);t.data.splice(e,1)}))}}))}}])&&Ee(e.prototype,n),i&&Ee(e,i),t}();Te(Me,"pluginName","lazyload"),Te(Me,"_defaults",{selector:".scroll-lazyload"});n(8);function Ye(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var je=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this.options=j.extend({},this.constructor._defaults,n),this.scrollView=e,this.data=[],this._initFixedContainer(),this._bindEvent(),this._collect(),this.currentIndex=-1,this.dect(0)}var e,n,i;return e=t,(n=[{key:"_bindEvent",value:function(){var t=this;this.scrollView.on("onRefresh",(function(t){console.log("refresh")})),this.scrollView.on("onScroll",(function(e){t.dect(e.scrollY)}))}},{key:"_initFixedContainer",value:function(){this.fixed=tt.create('\n        <div class="scroll-sticky-fixed"></div>\n      '),this.scrollView.wrapper.appendChild(this.fixed)}},{key:"_collect",value:function(){var t=this,e=this.options,n=e.selector,i=e.axis;this.data=[];var o=this.scrollView.querySelectorAll(n),r="x"==i?"Width":"Height",s="x"==i?"Left":"Top";o.forEach((function(e){var n=e["offset".concat(s)],i=e["offset".concat(r)];t.data.push({elem:e,minPos:n,size:i,maxPos:n+i})})),console.log(this.data)}},{key:"dect",value:function(t){var e=this;this.scrollView.isOverUpperBounding("y")?tt.setStyle(this.fixed,"display","none"):tt.setStyle(this.fixed,"display",""),this.data.some((function(n,i){var o=e.data[i+1];if(n.minPos<=t&&(!o||o.minPos>t)){if(e.currentIndex!==i){var r=n.elem.cloneNode(!0);tt.html(e.fixed,r),e.currentIndex=i}if(o){var s=o.minPos-(t+n.size);s<0?tt.setStyle(e.fixed,{transform:"translateY(".concat(s,"px)")}):tt.setStyle(e.fixed,{transform:"translateY(0px)"})}else tt.setStyle(e.fixed,{transform:"translateY(0px)"});return!0}}))}}])&&Ye(e.prototype,n),i&&Ye(e,i),t}();function De(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?De(Object(n),!0).forEach((function(e){Ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ce(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Xe(je,"pluginName","sticky"),Xe(je,"_defaults",{selector:".scroll-sticky"});var Be=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this.options=j.extend({},this.constructor._defaults,n),this.scrollView=e,this.data=[],this.currentIndex=0,this._bindEvent(),this._init(),this.check()}var e,n,i;return e=t,(n=[{key:"_bindEvent",value:function(){var t=this;this.scrollView.on("onScroll",(function(e){t.check()}))}},{key:"_init",value:function(){var t=this,e=this.options.selector;this.data=[],this.scrollView.querySelectorAll(e).forEach((function(e){var n=t.scrollView.getElementRect(e);t.data.push(Ae(Ae({},n),{},{elem:e}))})),console.log(this.data)}},{key:"check",value:function(){var t=this;if(!this.disabled){var e=this.scrollView.scrollY;this.scrollView.wrapperHeight,this.data.some((function(n,i){if(n.top<=e&&n.top+n.height>e)return t.currentIndex!==i&&(t.currentIndex=i,t.options.onChange(i)),!0}))}}},{key:"enableCheck",value:function(){this.disabled=!1}},{key:"disableCheck",value:function(){this.disabled=!0}},{key:"scrollTo",value:function(t){var e=this.data[t].top;this.scrollView.scrollTo(null,e)}}])&&Ce(e.prototype,n),i&&Ce(e,i),t}();Ie(Be,"pluginName","itemGroup"),Ie(Be,"_defaults",{selector:".scroll-item-group"});n(10);function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ze(t,e)}function ze(t,e){return(ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=He(t);if(e){var o=He(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Re(this,n)}}function Re(t,e){return!e||"object"!==Ve(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function We(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ue(t,e,n){return e&&qe(t.prototype,e),n&&qe(t,n),t}var Ge=function(){function t(){We(this,t)}return Ue(t,[{key:"render",value:function(t){var e=t.direction,n=t.pullOffset;return this.container=document.createElement("div"),this.container.className="pull-loader ".concat(e),"top"===e?(this.container.style.height="".concat(n,"px"),this.container.style.top="".concat(-n,"px")):"bottom"===e?(this.container.style.height="".concat(n,"px"),this.container.style.bottom="".concat(-n,"px")):"left"===e?(this.container.style.width="".concat(n,"px"),this.container.style.left="".concat(-n,"px")):"right"===e&&(this.container.style.width="".concat(n,"px"),this.container.style.right="".concat(-n,"px")),this.wrap=document.createElement("div"),this.wrap.className="pull-loader-wrap",this.container.appendChild(this.wrap),this.createIcon(),this.hintText=document.createElement("span"),this.hintText.className="pull-loader-text",this.wrap.appendChild(this.hintText),this.container}},{key:"createIcon",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","44"),t.setAttribute("height","44"),t.setAttribute("viewBox","0 0 44 44"),t.setAttribute("class","pull-loader-icon"),this.wrap.appendChild(t),this.polygonDom=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.polygonDom.setAttribute("cx","22"),this.polygonDom.setAttribute("cy","22"),this.polygonDom.setAttribute("r","20.5"),this.polygonDom.setAttribute("stroke","black"),this.polygonDom.setAttribute("stroke-width","2"),this.polygonDom.setAttribute("fill","none"),this.polygonDom.setAttribute("stroke-dasharray","0 128.8052987971815"),this.polygonDom.setAttribute("stroke-dashoffset","32.20132469929538"),this.polygonDom.setAttribute("class","circle"),t.appendChild(this.polygonDom)}},{key:"changeStatusText",value:function(t){this.hintText.innerText=t||""}},{key:"changeProgress",value:function(t){var e=128.8052987971815*t;this.polygonDom.setAttribute("stroke-dasharray","".concat(e," ").concat(128.8052987971815-e))}},{key:"loading",value:function(){this.polygonDom.setAttribute("stroke-dasharray","96.60397409788612 32.20132469929538"),this.polygonDom.innerHTML='\n\t\t\t<animateTransform\n\t\t\tattributeName="transform"\n\t\t\tattributeType="XML"\n\t\t\ttype="rotate"\n\t\t\tfrom="0 22 22"\n\t\t\tto="360 22 22"\n\t\t\tdur="750ms"\n\t\t\trepeatCount="indefinite"\n\t\t/>\n\t'}},{key:"stopLoading",value:function(){this.polygonDom.setAttribute("stroke-dasharray","0 0"),this.polygonDom.innerHTML=""}},{key:"show",value:function(){tt.setStyle(this.wrap,"display","")}},{key:"hide",value:function(){tt.setStyle(this.wrap,"display","none")}}]),t}(),Ke=function(){function t(e,n,i){We(this,t),i=this.options=j.extend({},this.constructor._defaults,i),this.direction=e,this.scrollView=n,this.disabled=!1,this.status="",this.pullPos=this.getPullPos(),this.hint=new Ge,this.scrollView.wrapper.appendChild(this.hint.render({direction:this.direction,pullOffset:this.options.pullOffset})),this._bindEvent()}return Ue(t,[{key:"getScrollPos",value:function(){return this.scrollView[{top:"scrollY",bottom:"scrollY",left:"scrollX",right:"scrollX"}[this.direction]]}},{key:"getBoundaryPos",value:function(){return this.scrollView[{top:"minScrollY",bottom:"maxScrollY",left:"minScrollX",right:"maxScrollX"}[this.direction]]}},{key:"_bindEvent",value:function(){var t=this;this.scrollView.on("onScroll",(function(){var e=t.getScrollPos();if(t.positionHint(e),!t.disabled&&!t.isLoading()&&"complete"!==t.status){var n=t.getBoundaryPos(),i=(e-n)/(t.pullPos-n);i=Math.max(0,Math.min(1,i)),t.hint.changeProgress(i),t.options.onProgress.call(t,{percent:i}),t.checkReady(e)?t.updateStatus("ready"):t.updateStatus("default")}})),this.scrollView.on("onDragEnd",(function(){t.disabled||"ready"===t.status&&t.ready()})),this.scrollView.on("onRefresh",(function(){t.pullPos=t.getPullPos()}))}},{key:"positionHint",value:function(t){if("top"===this.direction){var e=t;this.hint.container.style.transform="translateY(".concat(-e,"px)")}else if("bottom"===this.direction){var n=t+this.scrollView.wrapperHeight-this.scrollView.contentHeight;this.hint.container.style.transform="translateY(".concat(-n,"px)")}else if("left"===this.direction){var i=t;this.hint.container.style.transform="translateX(".concat(-i,"px)")}else if("right"===this.direction){var o=t+this.scrollView.wrapperWidth-this.scrollView.contentWidth;this.hint.container.style.transform="translateX(".concat(-o,"px)")}}},{key:"getPullPos",value:function(){return"top"===this.direction||"left"===this.direction?this.getBoundaryPos()-this.options.pullOffset:this.getBoundaryPos()+this.options.pullOffset}},{key:"checkReady",value:function(t){return"top"===this.direction||"left"===this.direction?t<=this.pullPos:t>=this.pullPos}},{key:"updateStatus",value:function(t){this.status!==t&&this.hint.changeStatusText(this.options["".concat(t,"Text")]),this.status=t,this.options.onUpdateStatus.call(this,{status:t})}},{key:"ready",value:function(){this.disabled||(this.scrollView.eventFlag="pullloader/ready",this.scrollView.setOptions(Ne({},{top:"minScrollY",bottom:"maxScrollY",left:"minScrollX",right:"maxScrollX"}[this.direction],this.pullPos)),this.scrollView.eventFlag=void 0,this.updateStatus("loading"),this.hint.loading(),this.options.onLoad.call(this,this))}},{key:"complete",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;this.updateStatus("complete"),this.hint.changeStatusText(t),this.hint.stopLoading();var o={top:"minScrollY",bottom:"maxScrollY",left:"minScrollX",right:"maxScrollX"};this.scrollView.eventFlag="pullloader/complete",this.scrollView.setOptions(Ne({},o[this.direction],(function(t){return t+("top"===e.direction||"left"===e.direction?-e.options.pullOffset:e.options.pullOffset)}))),this.scrollView.refresh(),this.scrollView.eventFlag=void 0,n>0?setTimeout((function(){e.scrollView.eventFlag="pullloader/complete",e.scrollView.setOptions(Ne({},o[e.direction],null)),e.scrollView._refresh(!1,!1),e.scrollView.eventFlag=void 0,e.scrollView.bound({duration:400,callback:function(){e.updateStatus("default"),i&&e.disable()}})}),n):(this.scrollView.eventFlag="pullloader/complete",this.scrollView.setOptions(Ne({},o[this.direction],null)),this.scrollView.refresh(),this.scrollView.eventFlag=void 0,this.scrollView.bound({duration:400,callback:function(){e.updateStatus("default")}}))}},{key:"isLoading",value:function(){return"loading"===this.status}},{key:"disable",value:function(){this.disabled||(this.disabled=!0,this.hint.hide())}},{key:"enable",value:function(){this.disabled&&(this.disabled=!1,this.hint.show())}},{key:"open",value:function(){var t=this,e=this.getPullPos();this.scrollView.scrollTo(void 0,e,{checkBounding:!1,callback:function(){t.ready()}})}}]),t}();Ne(Ke,"_defaults",{hint:Ge,pullOffset:80,defaultText:"",readyText:"",loadingText:"",onUpdateStatus:function(){},onProgress:function(){},onLoad:function(){},onDisable:function(){},onEnable:function(){}});var $e=function(t){Le(n,t);var e=Fe(n);function n(){We(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.call.apply(e,[this,"top"].concat(i))}return n}(Ke);Ne($e,"pluginName","topPull");var Je=function(t){Le(n,t);var e=Fe(n);function n(){We(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.call.apply(e,[this,"bottom"].concat(i))}return n}(Ke);Ne(Je,"pluginName","bottomPull");var Qe=function(t){Le(n,t);var e=Fe(n);function n(){We(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.call.apply(e,[this,"left"].concat(i))}return n}(Ke);Ne(Qe,"pluginName","leftPull");var Ze=function(t){Le(n,t);var e=Fe(n);function n(){We(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.call.apply(e,[this,"right"].concat(i))}return n}(Ke);Ne(Ze,"pluginName","rightPull");ce.use(ve),ce.use(xe),ce.use(Pe),ce.use(Me),ce.use(Be),ce.use(je),ce.use($e),ce.use(Je),ce.use(Qe),ce.use(Ze);e.default=ce}])}));